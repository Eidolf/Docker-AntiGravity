name: antigravity

services:
  antigravity-desktop:
    build: .
    container_name: antigravity-desktop
    ports:
      - "${HOST_WEB_PORT:-6080}:6080" # NoVNC web access
      - "${HOST_VNC_PORT:-5901}:5901" # VNC direct access (optional)
    shm_size: "2gb" # Required for Chrome to not crash
    privileged: true # Required to bypass WSL detection via mounting
    volumes:
      - antigravity-workspace:/home/dev/workspace
      - antigravity-docker-data:/var/lib/docker
    networks:
      - antigravity-network
    restart: unless-stopped

volumes:
  antigravity-workspace:
    name: antigravity-workspace
  antigravity-docker-data:
    name: antigravity-docker-data

networks:
  antigravity-network:
    name: antigravity-network
